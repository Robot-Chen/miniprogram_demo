//当前时间
var getNowFormatDate = function getNowFormatDate() {
    var date = new Date();
    var seperator1 = "-";
    var year = date.getFullYear();
    var month = date.getMonth() + 1;
    var strDate = date.getDate();
    if (month >= 1 && month <= 9) {
        month = "0" + month;
    }
    if (strDate >= 0 && strDate <= 9) {
        strDate = "0" + strDate;
    }
    var currentdate = year + seperator1 + month + seperator1 + strDate;
    return currentdate;
};

//前三个月时间
var getBeforeFiveDate = function getBeforeFiveDate(endDate) {
    var str = endDate.split("-");
    var year = str[0];
    var month = str[1];
    var day = str[2];
    if (month >= 4) {
        month = parseInt(month) - 3;
    } else {
        month = parseInt(month) + 9;
        year = parseInt(year) - 1;
    }
    if (month == 2) {
        if (day > 28) {
            if (year % 4 == 0 && year % 100 != 0) {
                day = 29;
            } else if (year % 400 == 0) {
                day = 29;
            } else {
                day = 28;
            }
        }
    } else if (month == 4 || month == 6 || month == 9 || month == 11) {
        if (day == 31) {
            day = 30;
        }
    }
    if (month >= 1 && month <= 9) {
        month = "0" + month;
    }
    if (parseInt(day) >= 0 && parseInt(day) <= 9) {
        day = "0" + parseInt(day);
    }
    var startdate = year + "-" + month + "-" + day;
    return startdate;
};

var getBeforeOneYearDate = function getBeforeOneYearDate(endDate) {
    var str = endDate.split("-");
    var year = str[0];
    var month = str[1];
    var day = str[2];
    year = parseInt(year) - 1;
    if (month == 2) {
        if (day == 29) {
            if (year % 4 == 0 && year % 100 != 0 || year % 400 == 0) {} else {
                day = 28;
            }
        }
    }
    if (parseInt(month) >= 1 && parseInt(month) <= 9) {
        month = "0" + parseInt(month);
    }
    if (parseInt(day) >= 0 && parseInt(day) <= 9) {
        day = "0" + parseInt(day);
    }
    var startdate = year + "-" + month + "-" + day;
    return startdate;
};

var getLogtypeStatus = function getLogtypeStatus(logtype) {
    var status = "";
    switch (parseInt(logtype)) {
      case 30001:
        status = "读者借书";
        break;

      case 30002:
        status = "读者还书";
        break;

      case 30003:
        status = "读者网上借书";
        break;

      case 30004:
        status = "读者取消借阅";
        break;

      case 30005:
        status = "读者超期未取，取消借阅";
        break;

      case 30006:
        status = "读者有欠款，取消借阅";
        break;

      case 30007:
        status = "读者有过期图书，取消借阅";
        break;

      case 30008:
        status = "读者超出最大借阅书，取消借阅";
        break;

      case 30009:
        status = "图书找不到，取消借阅";
        break;

      case 30010:
        status = "读者借书超过总价格，取消借阅";
        break;

      case 30012:
        status = "读者自助还书";
        break;

      default:
        status = "";
    }
    return status;
};

//判断是否快过期
var expiring = function expiring(str) {
    var time = Date.parse(str);
    var now = new Date().getTime();
    var days = Math.floor((time - now) / (24 * 3600 * 1e3));
    return days <= 7;
};

module.exports = {
    getNowFormatDate: getNowFormatDate,
    getBeforeFiveDate: getBeforeFiveDate,
    getBeforeOneYearDate: getBeforeOneYearDate,
    getLogtypeStatus: getLogtypeStatus,
    expiring: expiring
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2suanMiXSwibmFtZXMiOlsiZ2V0Tm93Rm9ybWF0RGF0ZSIsImRhdGUiLCJEYXRlIiwic2VwZXJhdG9yMSIsInllYXIiLCJnZXRGdWxsWWVhciIsIm1vbnRoIiwiZ2V0TW9udGgiLCJzdHJEYXRlIiwiZ2V0RGF0ZSIsImN1cnJlbnRkYXRlIiwiZ2V0QmVmb3JlRml2ZURhdGUiLCJlbmREYXRlIiwic3RyIiwic3BsaXQiLCJkYXkiLCJwYXJzZUludCIsInN0YXJ0ZGF0ZSIsImdldEJlZm9yZU9uZVllYXJEYXRlIiwiZ2V0TG9ndHlwZVN0YXR1cyIsImxvZ3R5cGUiLCJzdGF0dXMiLCJleHBpcmluZyIsInRpbWUiLCJwYXJzZSIsIm5vdyIsImdldFRpbWUiLCJkYXlzIiwiTWF0aCIsImZsb29yIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBLElBQU1BLG1CQUFtQixTQUFuQkEsZ0JBQW1CLEdBQU07QUFDN0IsTUFBSUMsT0FBTyxJQUFJQyxJQUFKLEVBQVg7QUFDQSxNQUFJQyxhQUFhLEdBQWpCO0FBQ0EsTUFBSUMsT0FBT0gsS0FBS0ksV0FBTCxFQUFYO0FBQ0EsTUFBSUMsUUFBUUwsS0FBS00sUUFBTCxLQUFrQixDQUE5QjtBQUNBLE1BQUlDLFVBQVVQLEtBQUtRLE9BQUwsRUFBZDtBQUNBLE1BQUlILFNBQVMsQ0FBVCxJQUFjQSxTQUFTLENBQTNCLEVBQThCO0FBQzVCQSxZQUFRLE1BQU1BLEtBQWQ7QUFDRDtBQUNELE1BQUlFLFdBQVcsQ0FBWCxJQUFnQkEsV0FBVyxDQUEvQixFQUFrQztBQUNoQ0EsY0FBVSxNQUFNQSxPQUFoQjtBQUNEO0FBQ0QsTUFBSUUsY0FBY04sT0FBT0QsVUFBUCxHQUFvQkcsS0FBcEIsR0FBNEJILFVBQTVCLEdBQXlDSyxPQUEzRDtBQUNBLFNBQU9FLFdBQVA7QUFDRCxDQWREOztBQWdCQTtBQUNBLElBQU1DLG9CQUFvQixTQUFwQkEsaUJBQW9CLENBQUNDLE9BQUQsRUFBYTtBQUNyQyxN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QUFDRixTQUFLLEtBQUw7QUFDRUEsZUFBUyxNQUFUO0FBQ0E7QUFDRixTQUFLLEtBQUw7QUFDRUEsZUFBUyxRQUFUO0FBQ0E7QUFDRixTQUFLLEtBQUw7QUFDRUEsZUFBUyxRQUFUO0FBQ0E7QUFDRixTQUFLLEtBQUw7QUFDRUEsZUFBUyxhQUFUO0FBQ0E7QUFDRixTQUFLLEtBQUw7QUFDRUEsZUFBUyxZQUFUO0FBQ0E7QUFDRixTQUFLLEtBQUw7QUFDRUEsZUFBUyxjQUFUO0FBQ0E7QUFDRixTQUFLLEtBQUw7QUFDRUEsZUFBUyxnQkFBVDtBQUNBO0FBQ0YsU0FBSyxLQUFMO0FBQ0VBLGVBQVMsWUFBVDtBQUNBO0FBQ0YsU0FBSyxLQUFMO0FBQ0VBLGVBQVMsZ0JBQVQ7QUFDQTtBQUNGLFNBQUssS0FBTDtBQUNFQSxlQUFTLFFBQVQ7QUFDQTtBQUNGO0FBQ0VBLGVBQVMsRUFBVDtBQW5DSjtBQXFDQSxTQUFPQSxNQUFQO0FBQ0QsQ0F4Q0Q7O0FBMkNBO0FBQ0EsSUFBTUMsV0FBVyxTQUFYQSxRQUFXLENBQUNULEdBQUQsRUFBUztBQUN4QixNQUFJVSxPQUFPckIsS0FBS3NCLEtBQUwsQ0FBV1gsR0FBWCxDQUFYO0FBQ0EsTUFBSVksTUFBTSxJQUFJdkIsSUFBSixHQUFXd0IsT0FBWCxFQUFWO0FBQ0EsTUFBSUMsT0FBTUMsS0FBS0MsS0FBTCxDQUFXLENBQUNOLE9BQU9FLEdBQVIsS0FBYyxLQUFHLElBQUgsR0FBUSxJQUF0QixDQUFYLENBQVY7QUFDQSxTQUFPRSxRQUFRLENBQWY7QUFFRCxDQU5EOztBQVFBRyxPQUFPQyxPQUFQLEdBQWlCO0FBQ2YvQixvQ0FEZTtBQUVmVyxzQ0FGZTtBQUdmTyw0Q0FIZTtBQUlmQyxvQ0FKZTtBQUtmRztBQUxlLENBQWpCIiwiZmlsZSI6ImJvb2suanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL+W9k+WJjeaXtumXtFxuY29uc3QgZ2V0Tm93Rm9ybWF0RGF0ZSA9ICgpID0+IHtcbiAgbGV0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICBsZXQgc2VwZXJhdG9yMSA9IFwiLVwiO1xuICBsZXQgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgbGV0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcbiAgbGV0IHN0ckRhdGUgPSBkYXRlLmdldERhdGUoKTtcbiAgaWYgKG1vbnRoID49IDEgJiYgbW9udGggPD0gOSkge1xuICAgIG1vbnRoID0gXCIwXCIgKyBtb250aDtcbiAgfVxuICBpZiAoc3RyRGF0ZSA+PSAwICYmIHN0ckRhdGUgPD0gOSkge1xuICAgIHN0ckRhdGUgPSBcIjBcIiArIHN0ckRhdGU7XG4gIH1cbiAgbGV0IGN1cnJlbnRkYXRlID0geWVhciArIHNlcGVyYXRvcjEgKyBtb250aCArIHNlcGVyYXRvcjEgKyBzdHJEYXRlO1xuICByZXR1cm4gY3VycmVudGRhdGU7XG59O1xuXG4vL+WJjeS4ieS4quaciOaXtumXtFxuY29uc3QgZ2V0QmVmb3JlRml2ZURhdGUgPSAoZW5kRGF0ZSkgPT4ge1xuICBsZXQgc3RyID0gZW5kRGF0ZS5zcGxpdCgnLScpO1xuICBsZXQgeWVhciA9IHN0clswXTtcbiAgbGV0IG1vbnRoID0gc3RyWzFdO1xuICBsZXQgZGF5ID0gc3RyWzJdO1xuICBpZiAobW9udGggPj0gNCkge1xuICAgIG1vbnRoID0gcGFyc2VJbnQobW9udGgpIC0gMztcbiAgfSBlbHNlIHtcbiAgICBtb250aCA9IHBhcnNlSW50KG1vbnRoKSArIDk7XG4gICAgeWVhciA9IHBhcnNlSW50KHllYXIpIC0gMTtcbiAgfVxuICBpZiAobW9udGggPT0gMikge1xuICAgIGlmIChkYXkgPiAyOCkge1xuICAgICAgaWYgKHllYXIgJSA0ID09IDAgJiYgeWVhciAlIDEwMCAhPSAwKSB7XG4gICAgICAgIGRheSA9IDI5O1xuICAgICAgfSBlbHNlIGlmICh5ZWFyICUgNDAwID09IDApIHtcbiAgICAgICAgZGF5ID0gMjk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZGF5ID0gMjg7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKG1vbnRoID09IDQgfHwgbW9udGggPT0gNiB8fCBtb250aCA9PSA5IHx8IG1vbnRoID09IDExKSB7XG4gICAgaWYgKGRheSA9PSAzMSkge1xuICAgICAgZGF5ID0gMzA7XG4gICAgfVxuICB9XG4gIGlmIChtb250aCA+PSAxICYmIG1vbnRoIDw9IDkpIHtcbiAgICBtb250aCA9IFwiMFwiICsgbW9udGg7XG4gIH1cbiAgaWYgKHBhcnNlSW50KGRheSkgPj0gMCAmJiBwYXJzZUludChkYXkpIDw9IDkpIHtcbiAgICBkYXkgPSBcIjBcIiArIHBhcnNlSW50KGRheSk7XG4gIH1cbiAgbGV0IHN0YXJ0ZGF0ZSA9IHllYXIgKyAnLScgKyBtb250aCArICctJyArIGRheTtcbiAgcmV0dXJuIHN0YXJ0ZGF0ZTtcbn1cblxuXG5jb25zdCBnZXRCZWZvcmVPbmVZZWFyRGF0ZSA9IChlbmREYXRlKSA9PiB7XG4gIGxldCBzdHIgPSBlbmREYXRlLnNwbGl0KCctJyk7XG4gIGxldCB5ZWFyID0gc3RyWzBdO1xuICBsZXQgbW9udGggPSBzdHJbMV07XG4gIGxldCBkYXkgPSBzdHJbMl07XG4gIHllYXIgPSBwYXJzZUludCh5ZWFyKS0xO1xuICBpZiAobW9udGggPT0gMikge1xuICAgIGlmIChkYXkgPT0gMjkpIHtcbiAgICAgIGlmICgoeWVhciAlIDQgPT0gMCAmJiB5ZWFyICUgMTAwICE9IDApfHwoeWVhciAlIDQwMCA9PSAwKSkge1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXkgPSAyODtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKHBhcnNlSW50KG1vbnRoKSA+PSAxICYmIHBhcnNlSW50KG1vbnRoKSA8PSA5KSB7XG4gICAgbW9udGggPSBcIjBcIiArIHBhcnNlSW50KG1vbnRoKTtcbiAgfVxuICBpZiAocGFyc2VJbnQoZGF5KSA+PSAwICYmIHBhcnNlSW50KGRheSkgPD0gOSkge1xuICAgIGRheSA9IFwiMFwiICsgcGFyc2VJbnQoZGF5KTtcbiAgfVxuICBsZXQgc3RhcnRkYXRlID0geWVhciArICctJyArIG1vbnRoICsgJy0nICsgZGF5O1xuICByZXR1cm4gc3RhcnRkYXRlO1xufVxuXG5jb25zdCBnZXRMb2d0eXBlU3RhdHVzID0gKGxvZ3R5cGUpID0+IHtcbiAgbGV0IHN0YXR1cyA9ICcnO1xuICBzd2l0Y2ggKHBhcnNlSW50KGxvZ3R5cGUpKSB7XG4gICAgY2FzZSAzMDAwMTpcbiAgICAgIHN0YXR1cyA9ICfor7vogIXlgJ/kuaYnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzMDAwMjpcbiAgICAgIHN0YXR1cyA9ICfor7vogIXov5jkuaYnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzMDAwMzpcbiAgICAgIHN0YXR1cyA9ICfor7vogIXnvZHkuIrlgJ/kuaYnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzMDAwNDpcbiAgICAgIHN0YXR1cyA9ICfor7vogIXlj5bmtojlgJ/pmIUnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzMDAwNTpcbiAgICAgIHN0YXR1cyA9ICfor7vogIXotoXmnJ/mnKrlj5bvvIzlj5bmtojlgJ/pmIUnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzMDAwNjpcbiAgICAgIHN0YXR1cyA9ICfor7vogIXmnInmrKDmrL7vvIzlj5bmtojlgJ/pmIUnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzMDAwNzpcbiAgICAgIHN0YXR1cyA9ICfor7vogIXmnInov4fmnJ/lm77kuabvvIzlj5bmtojlgJ/pmIUnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzMDAwODpcbiAgICAgIHN0YXR1cyA9ICfor7vogIXotoXlh7rmnIDlpKflgJ/pmIXkuabvvIzlj5bmtojlgJ/pmIUnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzMDAwOTpcbiAgICAgIHN0YXR1cyA9ICflm77kuabmib7kuI3liLDvvIzlj5bmtojlgJ/pmIUnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzMDAxMDpcbiAgICAgIHN0YXR1cyA9ICfor7vogIXlgJ/kuabotoXov4fmgLvku7fmoLzvvIzlj5bmtojlgJ/pmIUnO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzMDAxMjpcbiAgICAgIHN0YXR1cyA9ICfor7vogIXoh6rliqnov5jkuaYnO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHN0YXR1cyA9ICcnO1xuICB9XG4gIHJldHVybiBzdGF0dXM7XG59XG5cblxuLy/liKTmlq3mmK/lkKblv6vov4fmnJ9cbmNvbnN0IGV4cGlyaW5nID0gKHN0cikgPT4ge1xuICBsZXQgdGltZSA9IERhdGUucGFyc2Uoc3RyKTtcbiAgbGV0IG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICBsZXQgZGF5cz0gTWF0aC5mbG9vcigodGltZSAtIG5vdykvKDI0KjM2MDAqMTAwMCkpO1xuICByZXR1cm4gZGF5cyA8PSA3O1xuXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXROb3dGb3JtYXREYXRlLFxuICBnZXRCZWZvcmVGaXZlRGF0ZSxcbiAgZ2V0QmVmb3JlT25lWWVhckRhdGUsXG4gIGdldExvZ3R5cGVTdGF0dXMsXG4gIGV4cGlyaW5nXG59XG4iXX0=